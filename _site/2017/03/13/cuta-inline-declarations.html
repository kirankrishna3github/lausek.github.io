<html>
    <head>
        <title>lausek</title>
        <link rel="icon" type="image/gif" href="/img/icon/icon.gif" />
        <link rel="stylesheet" type="text/css" href="/css/minimal.css" />
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="author" content="lausek" />
        <meta name="description" content="This is my little blog about programming - mainly in ABAP - and other computer stuff." />
        <meta name="keywords" content="lausek, sap, abap, laurin, kirbach, lpk" />
    </head>
    <body>
    
    <header>
    <a href="http://localhost:4000">&lcub;lausek&rcub;</a>
    <nav>
        
    </nav>
    <hr />
</header>

    
    <main>
        <h1>Cuta Inline Declarations</h2>
<hr />

<p>Since ABAP 7.40 has been introduced, we are lucky to have two very neat operators: <code class="highlighter-rouge">DATA</code> and <code class="highlighter-rouge">FIELD-SYMBOL</code>. Both can be used with this syntax:</p>

<figure class="highlight"><pre><code class="language-abap" data-lang="abap">                       
<span class="o">&amp;</span><span class="k">lt</span><span class="err">;</span><span class="n">operator</span><span class="o">&amp;</span><span class="k">gt</span><span class="err">;</span><span class="p">(</span><span class="o">&amp;</span><span class="k">lt</span><span class="err">;</span><span class="n">variable_name</span><span class="o">&amp;</span><span class="k">gt</span><span class="err">;</span><span class="p">)</span> <span class="o">=</span> <span class="o">&amp;</span><span class="k">lt</span><span class="err">;</span><span class="n">some_val</span><span class="o">&amp;</span><span class="k">gt</span><span class="err">;</span><span class="s1">`</span></code></pre></figure>

<p>Direct assigments like the example above are only supported by <code class="highlighter-rouge">DATA</code>, but you could also place them…</p>

<ul>
  <li>after <code class="highlighter-rouge">.. INTO</code> statements or as the target of an <code class="highlighter-rouge">IMPORTING</code> parameter</li>
  <li>after <code class="highlighter-rouge">ASSIGN</code>/<code class="highlighter-rouge">ASSIGNING</code> statements (<code class="highlighter-rouge">READ TABLE</code>, <code class="highlighter-rouge">LOOP AT</code>)</li>
</ul>

<p>The type of the declarable symbol has to be known at compile-time, because… type-checking. Inline declarations aren’t dynamic - they are fully typed and as such could be checked by a computer.</p>

<p>The compiler will insert a declaration right before calls to declaration operators:</p>

<p><img src="/img/assets/insert.png" alt="insert" /></p>

<p>Following statements create exact the same variables:</p>

<figure class="highlight"><pre><code class="language-abap" data-lang="abap">                                            
<span class="c1">" TYPE:</span>
<span class="k">DATA</span> <span class="n">w_num</span>  <span class="k">TYPE</span> <span class="k">i</span> <span class="k">VALUE</span> <span class="mi">10</span><span class="p">.</span>                <span class="c1">" I(4)</span>
<span class="k">DATA</span> <span class="n">w_char</span> <span class="k">TYPE</span> <span class="kt">c</span> <span class="k">VALUE</span> <span class="s1">'Test'</span> <span class="k">LENGTH</span> <span class="mi">4</span><span class="p">.</span>   <span class="c1">" C(4)</span>
<span class="k">DATA</span> <span class="n">w_str</span>  <span class="k">TYPE</span> <span class="k">string</span> <span class="k">VALUE</span> <span class="s1">`Test`</span><span class="p">.</span>       <span class="c1">" CString</span>

<span class="k">DATA</span><span class="p">(</span><span class="n">w_num</span><span class="p">)</span>     <span class="o">=</span> <span class="mi">10</span><span class="p">.</span>                       <span class="c1">" I(4)</span>
<span class="k">DATA</span><span class="p">(</span><span class="n">w_char</span><span class="p">)</span>    <span class="o">=</span> <span class="s1">'Test'</span><span class="p">.</span>                   <span class="c1">" C(4)</span>
<span class="k">DATA</span><span class="p">(</span><span class="n">w_str</span><span class="p">)</span>     <span class="o">=</span> <span class="s1">`Test`</span><span class="p">.</span>                   <span class="c1">" CString</span></code></pre></figure>

<p>Using declaration operators in combination with loops becomes also very handy:</p>

<figure class="highlight"><pre><code class="language-abap" data-lang="abap"><span class="cm">* Old</span>
<span class="k">DATA</span> <span class="n">wa_line</span> <span class="k">LIKE</span> <span class="k">LINE</span> <span class="k">OF</span> <span class="n">i_table</span><span class="p">.</span>
<span class="k">LOOP</span> <span class="k">AT</span> <span class="n">i_table</span> <span class="k">INTO</span> <span class="n">wa_line</span><span class="p">.</span>
    <span class="c1">" work with wa_line</span>
<span class="k">ENDLOOP</span><span class="p">.</span>

<span class="cm">* New</span>
<span class="k">LOOP</span> <span class="k">AT</span> <span class="n">i_table</span> <span class="k">INTO</span> <span class="k">DATA</span><span class="p">(</span><span class="n">wa_line</span><span class="p">).</span>
    <span class="c1">" work with wa_line</span>
<span class="k">ENDLOOP</span><span class="p">.</span>

<span class="cm">*--------------------------------------------------</span>

<span class="cm">* Old</span>
<span class="k">FIELD</span><span class="o">-</span><span class="k">SYMBOL</span> <span class="o">&amp;</span><span class="k">lt</span><span class="err">;</span><span class="n">fs_line</span><span class="o">&amp;</span><span class="k">gt</span><span class="err">;</span> <span class="k">LIKE</span> <span class="k">LINE</span> <span class="k">OF</span> <span class="n">i_table</span><span class="p">.</span>
<span class="k">LOOP</span> <span class="k">AT</span> <span class="n">i_table</span> <span class="k">ASSIGNING</span> <span class="o">&amp;</span><span class="k">lt</span><span class="err">;</span><span class="n">fs_line</span><span class="o">&amp;</span><span class="k">gt</span><span class="err">;</span><span class="p">.</span>
    <span class="c1">" work with &amp;lt;fs_line&amp;gt;</span>
<span class="k">ENDLOOP</span><span class="p">.</span>

<span class="cm">* New</span>
<span class="k">LOOP</span> <span class="k">AT</span> <span class="n">i_table</span> <span class="k">ASSIGNING</span> <span class="k">FIELD-SYMBOL</span><span class="p">(</span><span class="o">&amp;</span><span class="k">lt</span><span class="err">;</span><span class="n">fs_line</span><span class="o">&amp;</span><span class="k">gt</span><span class="err">;</span><span class="p">).</span>
    <span class="c1">" work with &amp;lt;fs_line&amp;gt;</span>
<span class="k">ENDLOOP</span><span class="p">.</span></code></pre></figure>

<blockquote>
  <p>Every declared token stays in scope and is available even after <code class="highlighter-rouge">LOOP AT</code> is already done.</p>
</blockquote>


    </main>

    <hr />
<footer>
    Handcrafted by lausek 2018
</footer>

    
    </body>
</html>


